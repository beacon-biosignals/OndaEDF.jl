<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>API Documentation · OndaEDF</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">OndaEDF</span></div><form class="docs-search" action="search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>API Documentation</a><ul class="internal"><li><a class="tocitem" href="#Import-EDF-to-Onda"><span>Import EDF to Onda</span></a></li><li><a class="tocitem" href="#Export-EDF-from-Onda"><span>Export EDF from Onda</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>API Documentation</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>API Documentation</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/beacon-biosignals/OndaEDF.jl/blob/master/docs/src/index.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="API-Documentation"><a class="docs-heading-anchor" href="#API-Documentation">API Documentation</a><a id="API-Documentation-1"></a><a class="docs-heading-anchor-permalink" href="#API-Documentation" title="Permalink"></a></h1><h2 id="Import-EDF-to-Onda"><a class="docs-heading-anchor" href="#Import-EDF-to-Onda">Import EDF to Onda</a><a id="Import-EDF-to-Onda-1"></a><a class="docs-heading-anchor-permalink" href="#Import-EDF-to-Onda" title="Permalink"></a></h2><p>OndaEDF.jl prefers &quot;self-service&quot; import over &quot;automagic&quot;, and provides functionality to extract <a href="https://beacon-biosignals.github.io/Onda.jl/stable/#Samples-1"><code>Onda.Samples</code></a> and <a href="https://beacon-biosignals.github.io/Onda.jl/stable/#Onda.Annotation"><code>Onda.Annotation</code></a>s from an <code>EDF.File</code>.  These can be written to disk (with <a href="https://beacon-biosignals.github.io/Onda.jl/stable/#Onda.store"><code>Onda.store</code></a> / <a href="https://beacon-biosignals.github.io/Onda.jl/stable/#Onda.write_annotations"><code>Onda.write_annotations</code></a>) or manipulated in memory as desired.</p><article class="docstring"><header><a class="docstring-binding" id="OndaEDF.edf_to_onda_samples" href="#OndaEDF.edf_to_onda_samples"><code>OndaEDF.edf_to_onda_samples</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">edf_to_onda_samples(edf::EDF.File; custom_extractors=())</code></pre><p>Read signals from an <code>EDF.File</code> into a vector of <code>Onda.Samples</code>, which are returned along with a NamedTuple with diagnostic information (the same info returned by <a href="@ref"><code>edf_header_to_onda_samples_info</code></a>).</p><p>Collections of <code>EDF.Signal</code>s are mapped as channels to <code>Onda.Signal</code>s via simple &quot;extractor&quot; callbacks of the form:</p><pre><code class="language-none">edf::EDF.File -&gt; (samples_info::Onda.SamplesInfo,
                  edf_signals::Vector{EDF.Signal})</code></pre><p><code>edf_to_onda_samples</code> automatically uses a variety of default extractors derived from the EDF standard texts; see <code>src/standards.jl</code> for details. The caller can also provide additional extractors via the <code>custom_extractors</code> keyword argument.</p><p><code>EDF.Signal</code> labels that are converted into Onda channel names undergo the following transformations:</p><ul><li>the label is whitespace-stripped, parens-stripped, and lowercased</li><li>trailing generic EDF references (e.g. &quot;ref&quot;, &quot;ref2&quot;, etc.) are dropped</li><li>any instance of <code>+</code> is replaced with <code>_plus_</code> and <code>/</code> with <code>_over_</code></li><li>all component names are converted to their &quot;canonical names&quot; when possible (e.g. &quot;m1&quot; in an EEG-matched channel name will be converted to &quot;a1&quot;).</li></ul><p>See the OndaEDF README for additional details regarding EDF formatting expectations.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/beacon-biosignals/OndaEDF.jl/blob/a0cba65a1bbdc797b2fef3fea6c99826fd8a3636/src/import_edf.jl#L460-L487">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="OndaEDF.edf_to_onda_annotations" href="#OndaEDF.edf_to_onda_annotations"><code>OndaEDF.edf_to_onda_annotations</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">edf_to_onda_annotations(edf::EDF.File, uuid::UUID)</code></pre><p>Extract EDF+ annotations from an <code>EDF.File</code> for recording with ID <code>uuid</code> and return them as a vector of <code>Onda.Annotation</code>s.  Each returned annotation has a  <code>value</code> field that contains the string value of the corresponding EDF+ annotation.</p><p>If no EDF+ annotations are found in <code>edf</code>, then an empty <code>Vector{Annotation}</code> is returned.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/beacon-biosignals/OndaEDF.jl/blob/a0cba65a1bbdc797b2fef3fea6c99826fd8a3636/src/import_edf.jl#L553-L563">source</a></section></article><h3 id="Import-utilities"><a class="docs-heading-anchor" href="#Import-utilities">Import utilities</a><a id="Import-utilities-1"></a><a class="docs-heading-anchor-permalink" href="#Import-utilities" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-binding" id="OndaEDF.extract_channels_by_label" href="#OndaEDF.extract_channels_by_label"><code>OndaEDF.extract_channels_by_label</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">extract_channels_by_label(edf::EDF.File, signal_names, channel_names;
                          unit_alternatives=STANDARD_UNITS, preprocess_labels=(l,t) -&gt; l)</code></pre><p>For one or more signal names and one or more channel names, return a list of <code>[(infos, errors)...]</code> where <code>errors</code> is a vector of errors that occurred, and <code>infos</code> is a vector of <code>(si::Onda.SamplesInfo, edf_signals::Vector{EDF.Signal})</code>, where <code>edf_signals</code> align with <code>si.channel</code>. This list can have more than one pair if channels with the same signal kind/type have different sample rates or physical units.</p><p><code>(label, transducer_type)</code> pairs will be transformed into labels by <code>preprocess_labels</code> (default preprocessor returns the original label). An alternate to <code>STANDARD_UNITS</code> for mapping different spellings of units to their canonical unit name can be passed in as <code>unit_alternatives</code>.</p><p><code>errors</code> contains <code>SamplesInfoError</code>s thrown if channels corresponding to a signal were extracted but an error occured while interpreting physical units, while promoting sample encodings, or otherwise constructing a <code>SamplesInfo</code>.</p><p><code>signal_names</code> should be an iterable of <code>String</code>s naming the signal types to extract (e.g., <code>[&quot;ecg&quot;, &quot;ekg&quot;]</code>; <code>[&quot;eeg&quot;]</code>).</p><p><code>channel_names</code> should be an iterable of channel specifications, each of which can be either a <code>String</code> giving the generated channel name, or a <code>Pair</code> mapping a canonical name to a list of alternatives that it should be substituted for (e.g., <code>&quot;canonical_name&quot; =&gt; [&quot;alt1&quot;, &quot;alt2&quot;, ...]</code>).</p><p><code>unit_alternatives</code> lists standardized unit names and alternatives that map to them. See <code>OndaEDF.STANDARD_UNITS</code> for defaults.</p><p><code>preprocess_labels(label::String, transducer_type::String)</code> is applied to raw edf signal header labels beforehand; defaults to returning <code>label</code>.</p><p>See <code>OndaEDF.STANDARD_LABELS</code> for the labels (<code>signal_names =&gt; channel_names</code> <code>Pair</code>s) that are used to extract EDF signals by default.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/beacon-biosignals/OndaEDF.jl/blob/a0cba65a1bbdc797b2fef3fea6c99826fd8a3636/src/import_edf.jl#L211-L248">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="OndaEDF.edf_signals_to_samplesinfo" href="#OndaEDF.edf_signals_to_samplesinfo"><code>OndaEDF.edf_signals_to_samplesinfo</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">edf_signals_to_samplesinfo(edf, edf_signals, kind, channel_names, samples_per_record; unit_alternatives=STANDARD_UNITS)</code></pre><p>Generate a single <code>Onda.SamplesInfo</code> for the given collection of <code>EDF.Signal</code>s corresponding to the channels of a single Onda signal.  Sample units are converted to Onda units and checked for consistency, and a promoted encoding (resolution, offset, and sample type/rate) is generated.</p><p>No conversion of the actual signals is performed at this step.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/beacon-biosignals/OndaEDF.jl/blob/a0cba65a1bbdc797b2fef3fea6c99826fd8a3636/src/import_edf.jl#L167-L176">source</a></section></article><h3 id="Full-service-import"><a class="docs-heading-anchor" href="#Full-service-import">Full-service import</a><a id="Full-service-import-1"></a><a class="docs-heading-anchor-permalink" href="#Full-service-import" title="Permalink"></a></h3><p>For a more &quot;full-service&quot; experience, OndaEDF.jl also provides functionality to extract <code>Onda.Samples</code> and <code>Onda.Annotations</code> and then write them to disk:</p><article class="docstring"><header><a class="docstring-binding" id="OndaEDF.store_edf_as_onda" href="#OndaEDF.store_edf_as_onda"><code>OndaEDF.store_edf_as_onda</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">store_edf_as_onda(edf::EDF.File, onda_dir, recording_uuid::UUID=uuid4();
                  custom_extractors=STANDARD_EXTRACTORS, import_annotations::Bool=true,
                  postprocess_samples=identity,
                  signals_prefix=&quot;edf&quot;, annotations_prefix=signals_prefix)</code></pre><p>Convert an EDF.File to <code>Onda.Samples</code> and <code>Onda.Annotation</code>s, store the samples in <code>$path/samples/</code>, and write the Onda signals and annotations tables to <code>$path/$(signals_prefix).onda.signals.arrow</code> and <code>$path/$(annotations_prefix).onda.annotations.arrow</code>.  The default prefix is &quot;edf&quot;, and if a prefix is provided for signals but not annotations both will use the signals prefix.  The prefixes cannot reference (sub)directories.</p><p>Returns <code>(; recording_uuid, signals, annotations, signals_path, annotations_path)</code>.</p><p>Samples are extracted with <a href="#OndaEDF.edf_to_onda_samples"><code>edf_to_onda_samples</code></a>, and EDF+ annotations are extracted with <a href="#OndaEDF.edf_to_onda_annotations"><code>edf_to_onda_annotations</code></a> if <code>import_annotations==true</code> (the default).</p><p>Collections of <code>EDF.Signal</code>s are mapped as channels to <code>Onda.Signal</code>s via simple &quot;extractor&quot; callbacks of the form:</p><pre><code class="language-none">edf::EDF.File -&gt; (samples_info::Onda.SamplesInfo,
                  edf_signals::Vector{EDF.Signal})</code></pre><p><code>store_edf_as_onda</code> automatically uses a variety of default extractors derived from the EDF standard texts; see <code>src/standards.jl</code> and <a href="#OndaEDF.extract_channels_by_label"><code>extract_channels_by_label</code></a> for details. The caller can provide alternative extractors via the <code>custom_extractors</code> keyword argument, and the <a href="#OndaEDF.edf_signals_to_samplesinfo"><code>edf_signals_to_samplesinfo</code></a> utility can be used to extract a common <code>Onda.SamplesInfo</code> from a collection of EDF.Signals.</p><p><code>EDF.Signal</code> labels that are converted into Onda channel names undergo the following transformations:</p><ul><li>the label&#39;s prepended signal type is matched against known types, if present</li><li>the remainder of the label is whitespace-stripped, parens-stripped, and lowercased</li><li>trailing generic EDF references (e.g. &quot;ref&quot;, &quot;ref2&quot;, etc.) are dropped</li><li>any instance of <code>+</code> is replaced with <code>_plus_</code> and <code>/</code> with <code>_over_</code></li><li>all component names are converted to their &quot;canonical names&quot; when possible (e.g. for an EOG matched channel, &quot;eogl&quot;, &quot;loc&quot;, &quot;lefteye&quot;, etc. are converted to &quot;left&quot;).</li></ul><p><code>EDF.Signal</code>s which get extracted into more than one <code>Onda.Samples</code> are removed and an <code>AmbiguousChannelError</code> displayed as a warning.</p><p>See the OndaEDF README for additional details regarding EDF formatting expectations.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/beacon-biosignals/OndaEDF.jl/blob/a0cba65a1bbdc797b2fef3fea6c99826fd8a3636/src/import_edf.jl#L321-L368">source</a></section></article><h2 id="Export-EDF-from-Onda"><a class="docs-heading-anchor" href="#Export-EDF-from-Onda">Export EDF from Onda</a><a id="Export-EDF-from-Onda-1"></a><a class="docs-heading-anchor-permalink" href="#Export-EDF-from-Onda" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="OndaEDF.onda_to_edf" href="#OndaEDF.onda_to_edf"><code>OndaEDF.onda_to_edf</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">onda_to_edf(signals, annotations=[]; kwargs...)</code></pre><p>Return an <code>EDF.File</code> containing signal data converted from the Onda <a href="https://beacon-biosignals.github.io/Onda.jl/stable/#*.onda.signals.arrow-1"><code>signals</code> table</a> and (optionally) annotations from an <a href="https://beacon-biosignals.github.io/Onda.jl/stable/#*.onda.annotations.arrow-1"><code>annotations</code> table</a>.</p><p>Following the Onda v0.5 format, both <code>signals</code> and <code>annotations</code> can be any Tables.jl-compatible table (DataFrame, Arrow.Table, NamedTuple of vectors, vector of NamedTuples) which follow the signal and annotation schemas (respectively).</p><p>Each <code>EDF.Signal</code> in the returned <code>EDF.File</code> corresponds to a channel of an <code>Onda.Signal</code>.</p><p>The ordering of <code>EDF.Signal</code>s in the output will match the order of the rows of the signals table (and within each channel grouping, the order of the signal&#39;s channels).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/beacon-biosignals/OndaEDF.jl/blob/a0cba65a1bbdc797b2fef3fea6c99826fd8a3636/src/export_edf.jl#L134-L151">source</a></section></article></article><nav class="docs-footer"><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Tuesday 11 January 2022 21:03">Tuesday 11 January 2022</span>. Using Julia version 1.7.0.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
